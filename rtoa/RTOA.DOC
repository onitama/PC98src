//
//					RCP to Annex converter / RTOA.EXE
//					onion software 1994(c)
//

・RTOAって…??

	レコンポーザーVer.2のデータファイル(*.RCP)をAnnex MIDI用の
	MMLソースリストに変換するツールです。オプションにより、
	ゲートタイム，ベロシティのクオンタイズ、再現などのコントロール
	が可能です。変換できないコードやコントロールチェンジもあります。


・基本的な使いかた

	> RTOA ファイル名(.RCP) [return]

	で、.RCPファイルをコンバートして同じ名前の.ANXファイルを作成します。
	拡張子はつけても、つけなくてもかまいません。


・ちょっと便利なオプション

	/Q数値(0-4)

	ゲートタイムの再現レートを設定します。
	0ならば、ゲートタイムをまったく変換せずに、音の長さだけをMMLに
	再現します。
	1〜4は、数値が大きくなるほどゲートタイムを元データ通りに再現する
	ようになります。
	192分音符や96分音符などがズラズラと連なってMMLが見難くなるのを
	防止したい時に調節して下さい。
	/Qの設定がない場合は4（完全再現）になります。

	/V数値(0-4)

	ベロシティの再現レートを設定します。
	0ならば、ベロシティをまったく変換しません。
	1〜4は、数値が大きくなるほどベロシティを元データ通りに再現する
	ようになります。
	数値が小さいと、あまり大きな変化でない場合は誤差とみなしてベロシティ
	の変更をしなくなります。vコマンドがズラズラと連なってMMLが見難く
	なるのを防止したい時に調節して下さい。
	/Vの設定がない場合は4（完全再現）になります。

	/C

	ANXファイルのセーブをせずに画面に出力をします。
	あまり使うことはないでしょう。


・制約事項

	このコンバーターはすべてのRCPファイルがコンバートできるわけでは
	ありません。使用する際には以下の点に注意してみてください。

	・タイは変換しません。
	・タイムベースは4分音符が48のものでなければなりません。
	・キーはＣmajorでなければなりません。
	・SAME MEASは変換できません。
	・エクスクルーシブメッセージは変換できません。


	また、現バージョンで再現される命令は以下の通りです。

	音符(c〜b)，休符(r)，およびゲートタイム(:)，ベロシティ(v)
	標準音長(l)，標準ゲートタイム(q)，オクターブ(>,<,o)
	テンポ(t)，ループ([,])，ボリューム(V)，パンポット(P)
	プログラムチェンジ／バンクチェンジ(@,@.)
	ピッチベンド(D)，MIDI ch.変更(chm)


・RTOAの動作原理

	RTOAは単純にRCPの音階と音長と、ゲートタイム、ベロシティを
	MMLに反映します。しかし、それだけではダラダラ長いMMLソースが
	できてしまって見難くなります。
	RTOAでは、まず最初に音長とゲートタイムの差を1音づつチェックして
	最も多く出てくる差の値をq-数値で指定して、標準的なゲートタイムを
	省略するようにしています。
	そして、音長の統計も取り最も多く出てきた長さを最初にlコマンドで
	指定しておき、MMLの縮小をはかっています。
	MMLの出力は、4小節を越えるか、1行が70文字を越えてしまった場合に
	改行を入れるようになっています。
	また、ドラムパートだけは/Qで指定していても、ゲートタイム変換を
	しないようにしています。


・最後に

	まだ途中バージョンです(^^)
	ドキュメントもいいかげんです。もっと便利にせんとなぁ・・。
	ご意見、質問、希望、BUGなどあれば下のIDまで(^^)

							おにたま
							ONITAMA  (東京BBS)
							ONITAMA  (トルバネット)
							SCL70556 (セタネット)


ＡＳＫＡフォーマット画像圧縮プログラム  for PC9801
             Copyright 1991･1992 XKD Laboratory.


■使用方法

usage: aska [-option] filename (拡張子無し・Wild Card可)

aska         fname (-L-) 画像表示
aska -S[n,m] fname (S--) 画像保存（範囲n,m）
aska -D[n]   fname (-L-) 輝度を n% にして表示
aska -Cn     fname (SL-) 透明色を COLOR n に指定
aska -C-     fname (-L-) 透明色を無視して展開する
aska -K      fname (-L-) 表示後キー入力待ち
aska -n,m    fname (SL-) 基点座標(n,m)指定
aska -B      fname (SL-) 裏ＧＲＡＭの内容を対象にする
aska -G      fname (-L-) 画像表示前に画像を消去する
aska -M      fname (SL-) 常駐パレットを作成する
aska -PR     fname (--P) パレット情報を取り出す(.RGB)
aska -PS     fname (--P) パレット情報を付加する(.RGB)
aska -N      fname (SLP) テキストを使用しない
aska -I      fname (---) ファイル内容表示

 []内省略可能。オプション複数指定可能。

■プログラムの説明

【説明】
アナログ１６色のグラフィック圧縮展開を行います。
１６色ボード、Ｖ３０以上のＣＰＵが必要です。

【拡張子】
拡張子は(.ASK)しか対応してません。コマンドラインで拡張子を付加し
ても無視します。

【常駐パレット】
MAKI･MAG等と同じ常駐パレットを使用しています。ですからMAKI関係の
パレットツール(TONE.COMなど)が全て動きます。

【必要メモリー】
SAVE時に１２８ＫＢ、LOAD時にはファイルの大きさの空きエリアを必要
とします。もしも無い場合はその旨を警告して異常終了します。

【対象ページ】
通常はＧＲＡＭの１ページ目に対して処理します。

【セーブ時のパレット】
ＳＡＶＥ時は拡張子が.RGBのファイルを検索し有ればそれを使用、なけ
れば常駐パレットを参照し、それもなければデフォルトのパレットを使
用します。

【セーブに関して】
部分セーブは、基点と範囲を指定して行ってください。どちらか片方を
指定したときは自動的に画面の右下までの範囲になります。

【座標の指定】
基点・範囲ともＸ座標は８ドット単位です。

【終了コード】
終了コードを返すので、必要が有ればerrorlevel等で取得してください。


■ＡＳＫＡの特徴

１．圧縮が早い。
　圧縮速度はMAKIとほぼ同等です。
　MAGよりは早いでしょう。
　XLD･Piとは比べることが間違ってます。

２．展開が早い。
　展開速度はmaki･magよりも僅かに勝っています。
　込み入った絵になればなるほど真価を発揮します。

３．圧縮率がいい。
　圧縮率はmaki･magとXLD･Piの中間程度を実現しています。
　物によってはPiにかなり迫ります。
　maki･magに負ける可能性は５％以下でしょう。

４．プログラムサイズが小さい。
　圧縮展開プログラムで８ＫＢ弱です。

５．常駐パレットに対応
　maki･magと同じ形式の常駐パレットに対応しています。


■終了コード一覧

 00h	:	正常終了
 01h	:	エスケープキーで抜けてきた。
 F1h	:	メモリーが足りない。
 F2h	:	ファイルがオープン出来ない。
 F3h	:	ファイルが読み込めない。
 F4h	:	ファイルが書き込めない。
 F5h	:	ディスクフル。
 F6h	:	ファイルが見つからない。
 F7h	:	ＡＳＫＡフォーマットでは無い。
 F8h	:	数があってない。
 F9h	:	オプションが不正である。


■旧版（ＡＳＫ６）をお使いの方へ

　ASKA.COMでも同じデータが扱えます。ただし、その場合は拡張子を
.PD6 から .ASK に変更してください。
(ex.) REN *.PD6 *.ASK

■その他の情報

【その１】
　常駐パレット作成の際、メモリーの分断を避けるために、後方にメ
モリーを確保した場合は環境領域を解放して作成します。
　但し環境領域が小さい時(96byte未満の場合)は、やむを得ずメモリ
ーを分断して作成します。気になる人は環境領域を拡張（※1 参照）
するか、同包のプログラム(palet.com)を利用してください。多少は
無駄メモリーが減ります。

※1 環境領域を増やす方法。

 CONFIG.SYSの最後の行に以下の行を追加してから、環境変数を追加し
て下さい。

SHELL = COMMAND.COM /E:100

　詳しくはＭＳ−ＤＯＳのマニュアルを参照下さい。

Ver 2.01から常駐パレットの作成手順を大幅に変更しました。



					１９９２年２月１０日



■version up遍歴

	【以下　ＡＳＫ６】
1.00	1991/12/18
		初期配布バージョン
1.01	1992/01/02
	-K	キー待ちオプションの追加
1.02	1992/01/03
		COMファイル化
		DISK FULL時のバグ取り
		ロード時に必要最小メモリーを取得するように変更
	-n,m	ロードオフセット指定追加
1.03	1992/01/04
		オプションの複数指定を可能にする
	-Sn,m	セーブ時に範囲を指定できるようになった
	-n,m	ロードオフセットをセーブ時にも対応
	-Cn	透明色をセーブ時にも対応
	-C-	透明色を無視するオプションを追加
	-B	裏ＧＲＡＭを直接アクセスできるように追加
		usageメッセージの変更
1.04	1992/01/04
	FNAME	ファイルネームをコマンドラインのどこでも使用可能にした
1.10	1992/01/07
	-N	常駐パレット無視を可能にした
		Copyrightの年号更新
		ワイルドカードを使用可能にした
		表示のときにテキストを消す処理を追加
	-G	グラフィックを消去するモードを追加
		プログラムサイズの縮小（約6.4KB）
1.11	1992/01/08
		usageメッセージの修正
1.12	1992/01/12
		常駐パレットを作らないことがあると言うバグを修正
		常駐パレットを作ると暴走する場合には作らないように変更
1.13	1992/01/19
		常駐パレット無しでセーブするとエラーで止まるバグを修正
1.14	1992/02/03
		常駐パレットの作成手順にバグを発見したので修正
1.15	1992/02/03
		環境領域が足りなくても常駐パレットを作るように変更

	【以下　ＡＳＫＡ】
2.00	1992/02/06
		ファイルネームを ASK6.COM から ASKA.COM に変更
		デフォルト拡張子を .PD6 から .ASK に変更
		デフォルトでは常駐パレットを作成しないように変更
		終了コードを返すようにプログラムを追加
	-M	常駐パレットを作成するスイッチを追加
	(-Q)	旧 -Q スイッチを削除
	(-N)	旧 -N スイッチを削除
	-PR	-R スイッチを -PR に変更
	-PS	-P スイッチを -PS に変更
	-N	テキストをいじくらないモードを追加
2.01	1992/02/10
		常駐パレット作成プロセスを修正(PALET.COM V1.02と同じ)
	-!	常駐解除を追加
2.02	1992/02/14
		基点のみを指定してセーブしたときの範囲修正
	-I	ファイルのステータス表示機能追加
	-n,m	基点をファイルに記録
2.03	1992/02/15
	-I	ステータス表示に総ファイル数と平均圧縮率を追加
2.04	1992/02/16
		HEADERを新規設定(-PD1- -PD2-)
		圧縮アルゴリズム改良により圧縮率が気持ちアップ
		圧縮展開ルーチンを見直し気持ち高速化
		テキストon/offの方法を変更
	-K	キー待ち時にTABでファイルネームのon/offを追加
2.05	1992/02/20
		wild card指定で、ヘッダーのエラーを認識するように変更
	-G	画像消去ルーチンを高速化
	-Dn	輝度指定が出来るように変更
		常駐パレットに輝度データが反映していなかったので修正
	-S	セーブ後の展開時に輝度を半分にして表示するように変更


	【以下　PALET.COM】
1.00	1992/01/??
		取り敢えず常駐パレットを作れるバージョン
1.01	1992/02/08
		タイトルメッセージを変更
	R	常駐解除を可能にする
1.02	1992/02/10
		常駐パレット作成プロセスを大幅修正
